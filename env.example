# ===========================================
# TeamworkMissiveConnector Environment Config
# ===========================================
# Copy this file to .env and fill in your values

# === REQUIRED ===

# Teamwork API (Settings > API & Webhooks)
TEAMWORK_BASE_URL=https://yourcompany.teamwork.com
TEAMWORK_API_KEY=your_api_key_here

# Missive API (Settings > API)
MISSIVE_API_TOKEN=your_token_here

# PostgreSQL connection string
PG_DSN=postgresql://user:password@host:5432/database

# === OPTIONAL: Craft Integration ===

# Craft Multi-Document API URL (no webhooks, polling only)
# CRAFT_BASE_URL=https://connect.craft.do/links/YOUR_LINK_ID/api/v1

# === OPTIONAL: Webhooks ===

# Set to true for polling-only mode (no webhooks needed)
# DISABLE_WEBHOOKS=true

# ngrok auth token for local development webhooks
# NGROK_AUTHTOKEN=your_ngrok_token

# Webhook signature secrets (optional security)
# TEAMWORK_WEBHOOK_SECRET=your_secret
# MISSIVE_WEBHOOK_SECRET=your_secret

# === OPTIONAL: Date Filtering ===

# Only sync data created/received after this date (DD.MM.YYYY)
# TEAMWORK_PROCESS_AFTER=01.01.2020
# MISSIVE_PROCESS_AFTER=01.01.2020

# Include completed tasks on initial sync (default: true)
# INCLUDE_COMPLETED_TASKS_ON_INITIAL_SYNC=true

# === OPTIONAL: Timing ===

# Polling interval in seconds
# - Default: 5s when DISABLE_WEBHOOKS=true
# - Default: 60s when DISABLE_WEBHOOKS=false
# PERIODIC_BACKFILL_INTERVAL=60

# Overlap window for checkpoint queries (prevents missed events)
# BACKFILL_OVERLAP_SECONDS=120

# Retry interval for failed queue items
# SPOOL_RETRY_SECONDS=60

# === OPTIONAL: Database Resilience ===

# Connection timeout in seconds
# DB_CONNECT_TIMEOUT=10

# Delay between reconnect attempts
# DB_RECONNECT_DELAY=5

# Maximum delay with exponential backoff
# DB_MAX_RECONNECT_DELAY=60

# Retries for individual database operations
# DB_OPERATION_RETRIES=3

# Maximum retry attempts for failed queue items
# MAX_QUEUE_ATTEMPTS=3

# === OPTIONAL: Application ===

# Flask application port
# APP_PORT=5000

# Logging level: DEBUG, INFO, WARNING, ERROR
# LOG_LEVEL=INFO

# Timezone for timestamps (IANA format)
# TIMEZONE=Europe/Berlin

# === OPTIONAL: Cloud Logging (Betterstack) ===

# Betterstack source token for cloud logging
# BETTERSTACK_SOURCE_TOKEN=your_token

# Custom Betterstack ingestion host (if using self-hosted)
# BETTERSTACK_INGEST_HOST=in.logs.betterstack.com

